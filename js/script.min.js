function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e&&document.querySelector("body").classList.add("webp")}));class Me{constructor(e){this.typeMedia=e}init(){if(this.elements=document.querySelectorAll("[data-me]"),this.objects=[],this.elements.length>0){for(let e=0;e<this.elements.length;e++){const t=this.elements[e],s={};s.el=t;const o=t.dataset.me.split(",").map((e=>e.trim()));s.dataAttr={size:o[0],block:o[1],index:o[2]},s.parentElement=s.el.parentElement,s.indexParent=Array.from(s.parentElement.children).indexOf(s.el),this.objects.push(s)}for(let e=0;e<this.objects.length;e++){const t=this.objects[e],s=window.matchMedia(`(${this.typeMedia}-width:${t.dataAttr.size}px)`);this.mediaHandler(s,t),s.addEventListener("change",(e=>this.mediaHandler(e,t)))}}}mediaHandler(e,t){e.matches?(t.el.classList.add("-me"),this.moveTo(t.el,t.dataAttr.block,t.dataAttr.index)):(t.el.classList.remove("-me"),this.moveBack(t.el,t.parentElement,t.indexParent))}moveTo(e,t,s){if(document.querySelector(t)){const o=document.querySelector(t),l=o.children,r="first"==s?0:"last"==s?void 0:s;null!=l[r]?l[r].insertAdjacentElement("beforebegin",e):o.insertAdjacentElement("beforeend",e)}}moveBack(e,t,s){const o=t.children;null!=o[s]?o[s].insertAdjacentElement("beforebegin",e):t.insertAdjacentElement("beforeend",e)}}const me=new Me("max");me.init();let slideUp=(e,t=400)=>{e.classList.contains("-anim")||(e.classList.add("-anim"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("-anim")}),t))},slideDown=(e,t=400)=>{if(!e.classList.contains("-anim")){e.classList.add("-anim"),e.hidden&&(e.hidden=!1);let s=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=s+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("-anim")}),t)}},slideToggle=(e,t=400)=>e.hidden?slideDown(e,t):slideUp(e,t);class ValidateForm{constructor(e,t){this.form=e,this.objUser=t,e.addEventListener("submit",(s=>this.formSend(s,this,e,t)))}async formSend(e,t,s,o){e.preventDefault();if(0===t.validateForm(s,o)){s.classList.add("-sending");new FormData(s);if((await fetch(o.url,{method:o.method})).ok?console.log("result"):console.log("Error"),s.reset(),o.items.input&&o.items.input.length>0&&o.items.input.forEach((e=>{e.blur()})),s.querySelectorAll(".-custom-select")){s.querySelectorAll(".-custom-select").forEach((e=>e.reset()))}s.classList.remove("-sending")}else console.log("Emptly")}validateForm(e,t){let s=0;for(const e in t.items){const o=t.items[e];if("input"==e&&o.length>0&&o.forEach((e=>{this.removeError(e),e.classList.contains("-tel")?this.telTest(e)&&(this.addError(e),s++):e.classList.contains("-email")?this.emailTest(e)&&(this.addError(e),s++):e.classList.contains("-password")?(e.value.length<8||e.value.length>10)&&(this.addError(e),s++,e.value.length<8&&console.log("passswod 8"),e.value.length>10&&console.log("passswod 10")):e.value||(this.addError(e),s++)})),"checkbox"==e&&o.length>0&&o.forEach((e=>{this.removeError(e),e.checked||(this.addError(e),s++)})),"radio"==e&&o.length>0){const e={};o.forEach((t=>{e[t.name]||(e[t.name]=[]),e[t.name].push(t)}));for(const t in e){const o=e[t],l=Array.from(o).filter((e=>e.checked))[0];o.forEach((e=>{this.removeError(e)})),l||o.forEach((e=>{this.addError(e),s++}))}}"select"==e&&o.length>0&&o.forEach((e=>{e.classList.remove("-error"),e.classList.contains("-custom-select-no-choose")&&(e.classList.add("-error"),s++)}))}return s}removeError(e){e.parentElement.classList.remove("-error"),e.classList.remove("-error");const t=e.closest("form");t.classList.contains("-error")&&t.classList.remove("-error")}addError(e){e.parentElement.classList.add("-error"),e.classList.add("-error");const t=e.closest("form");t.classList.contains("-error")||t.classList.add("-error")}emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}telTest(e){return!/^((8|\+7)[\- ]?)?(\(?\d{3,4}\)?[\- ]?)?[\d\- ]{5,10}$/.test(e.value)}}const inputsValue=document.querySelectorAll("[data-value]");inputsValue.length>0&&inputsValue.forEach((e=>{const t=e.dataset.value;e.value||(e.placeholder=t),e.addEventListener("focus",(()=>{e.placeholder=""})),e.addEventListener("blur",(()=>{e.placeholder=t}))}));class Spoller{init(){if(this.elements=document.querySelectorAll("[data-spollers]"),this.objects=[],this.elements.length>0){for(let e=0;e<this.elements.length;e++){const t=this.elements[e],s={};s.el=t,s.oneSpoller=s.el.hasAttribute("data-one-spoller"),s.items=s.el.querySelectorAll("[data-spoller-item]");const o=s.el.dataset.spollers.split(",").map((e=>e.trim()));s.mediaSettings={type:o[0],size:o[1]},s.activeItems=Array.from(s.items).filter((e=>e.classList.contains("-active"))),this.objects.push(s)}for(let e=0;e<this.objects.length;e++){const t=this.objects[e],s=window.matchMedia(`(${t.mediaSettings.type}-width:${t.mediaSettings.size}px)`);this.mediaHandler(s,t.el,t.items,t.activeItems,t.oneSpoller),s.addEventListener("change",(e=>this.mediaHandler(e,t.el,t.items,t.activeItems,t.oneSpoller)))}}}mediaHandler(e,t,s,o,l){if(e.matches){const e=[],o=[];s.forEach((t=>t.classList.contains("-active")?e.push(t):o.push(t))),e.length>0?l?e.length>1?(slideDown(s[0].nextElementSibling,0),e.forEach((e=>{e.classList.remove("-active"),slideUp(e.nextElementSibling,0)})),s[0].classList.add("-active")):1==e.length&&slideDown(e[0].nextElementSibling,0):e.forEach((e=>{slideDown(e.nextElementSibling,0)})):l&&(s[0].classList.add("-active"),slideDown(s[0].nextElementSibling,0)),o.length>0&&o.forEach((e=>{slideUp(e.nextElementSibling,0)})),t.items=s,t.oneSpoller=l,t.addEventListener("click",this.actionSpollerElement)}else s.forEach((e=>{e.classList.remove("-active"),slideDown(e.nextElementSibling,0)})),o.length>0&&o.forEach((e=>e.classList.add("-active"))),t.items&&t.oneSpoller&&(delete t.items,delete t.oneSpoller),t.removeEventListener("click",this.actionSpollerElement)}actionSpollerElement(e){const t=e.target,s=e.currentTarget.items,o=e.currentTarget.oneSpoller,l=Array.from(s).filter((e=>e.nextElementSibling.classList.contains("-anim")));if(t.closest("[data-spoller-item]")){const r=t.closest("[data-spoller-item]");r.querySelector("[data-spoller-openner]")&&!t.closest("[data-spoller-openner]")||(e.preventDefault(),0===l.length&&(r.classList.contains("-active")?o||(r.classList.remove("-active"),slideUp(r.nextElementSibling)):(slideDown(r.nextElementSibling),o&&s.forEach((e=>{e.classList.remove("-active"),slideUp(e.nextElementSibling)})),r.classList.add("-active"))))}}}const spoller=new Spoller;spoller.init();class LoadMore{constructor(e){const t=document.querySelector(e.el);t&&t.addEventListener("click",(s=>{s.preventDefault(),t.classList.contains("-hold")||(t.classList.add("-hold"),this.loadMore(e,t))}))}async loadMore(e,t){const s=await fetch(e.url,{method:"GET"});if(s.ok){const o=await s[e.method]();setTimeout((()=>{e.afterGet(o,t)}),1e3)}}}class CustomSelect{init(){if(this.elements=document.querySelectorAll("[data-custom-select]"),this.objects=[],this.elements.length>0){for(let e=0;e<this.elements.length;e++){const t=this.elements[e],s={};s.select=t,s.options=s.select.options,s.selectedIndex=s.select.selectedIndex,s.className=s.select.classList[0],s.mLabel=!!s.select.hasAttribute("data-custom-select-mlabel")&&s.select.dataset.customSelectMlabel,s.label=!!s.select.hasAttribute("data-custom-select-label")&&s.select.dataset.customSelectLabel,this.objects.push(s)}for(let e=0;e<this.objects.length;e++){const t=this.objects[e];t.select.className="",t.select.style.display="none",this.createStructure(t.select,t.options,t.className,t.mLabel,t.label),t.customSelect={},t.customSelect.select=t.select.nextElementSibling,t.customSelect.openner=t.customSelect.select.querySelector(".-custom-select__openner"),t.customSelect.value=t.customSelect.select.querySelector(".-custom-select__value"),t.customSelect.icon=t.customSelect.select.querySelector(".-custom-select__icon"),t.customSelect.body=t.customSelect.select.querySelector(".-custom-select__body"),t.customSelect.items=t.customSelect.select.querySelectorAll(".-custom-select__item"),this.fillContent(t);const s=t.customSelect;t.label?s.select.classList.add("-custom-select-no-choose"):s.items[t.select.selectedIndex].classList.add("-active"),slideUp(s.body,0),s.select.addEventListener("click",(e=>this.actionCustomSelect(e,t.label,t.select,t.options))),document.addEventListener("click",this.actionDocument);const o=this;s.select.reset=function(){const e=s.items[t.selectedIndex];o.activeOption(e,t.select,t.options,s.select,t.label)}}}}createStructure(e,t,s,o,l){const r=`<div class="${s} -custom-select">`,i=`<a href="" class="${s}__openner -custom-select__openner">`+(o?`<div class="${s}__mlabel -custom-select__mlabel">${o}</div>`:"")+`<div class="${s}__value -custom-select__value">${l||""}</div>`+`<div class="${s}__icon -custom-select__icon"></div>`+"</a>",c=`<div class="${s}__body -custom-select__body">`;let n="";for(let e=0;e<t.length;e++){n+=`<div class="${s}__item -custom-select__item"></div>`}const a=r+i+(c+n+"</div>")+"</div>";e.insertAdjacentHTML("afterend",a)}fillContent(e){const t=e.options[e.select.selectedIndex];e.label||(e.customSelect.value.innerHTML=t.innerHTML);const s=Array.from(e.options).map((e=>e.innerHTML));e.customSelect.items.forEach(((e,t)=>e.innerHTML=s[t]))}actionCustomSelect(e,t,s,o){const l=e.target,r=e.currentTarget,i=r.querySelector(".-custom-select__value"),c=r.querySelector(".-custom-select__body"),n=r.querySelectorAll(".-custom-select__item");if(l.closest(".-custom-select__item")&&(document.querySelector(".-custom-select__body.-anim")||(t&&r.classList.contains("-custom-select-no-choose")&&r.classList.remove("-custom-select-no-choose"),l.classList.contains("-active")||this.activeOption(l,s,o,r),r.classList.remove("-open"),slideUp(c))),l.closest(".-custom-select__openner")&&(e.preventDefault(),!document.querySelector(".-custom-select__body.-anim"))){const e=l.closest(".-custom-select__openner");if(document.querySelector(".-custom-select.-open")){const e=document.querySelector(".-custom-select.-open");if(e!=r){const t=e.querySelector(".-custom-select__body");slideUp(t),e.classList.remove("-open")}}r.classList.contains("-open")?(e.vars=[],e.removeEventListener("blur",this.blurOpenner),e.removeEventListener("keydown",this.keydownOpenner),document.removeEventListener("keydown",this.keydownDocument)):(e.vars=[this,s,o,r,i,c,n,t],e.addEventListener("keydown",this.keydownOpenner),document.addEventListener("keydown",this.keydownDocument),e.addEventListener("blur",this.blurOpenner)),r.classList.toggle("-open"),slideToggle(c)}}blurOpenner(e){if(!document.querySelector(".-custom-select__body.-anim")){const t=e.target,s=t.vars[0],o=t.vars[3],l=t.vars[5];"Tab"==t.eventKey&&(o.classList.remove("-open"),slideUp(l),t.eventKey=void 0),t.removeEventListener("blur",s.blurOpenner),t.removeEventListener("keydown",s.keydownOpenner),document.removeEventListener("keydown",s.keydownDocument)}}keydownDocument(e){"ArrowUp"!=e.code&&"ArrowDown"!=e.code||e.preventDefault()}keydownOpenner(e){const t=e.target,s=t.vars[0],o=t.vars[1],l=t.vars[2],r=t.vars[3],i=(r.querySelector(".-custom-select__value"),r.querySelector(".-custom-select__body")),c=r.querySelectorAll(".-custom-select__item"),n=t.vars[7];if(t.eventKey=e.code,"Tab"==e.code&&document.querySelector(".-custom-select__body.-anim")&&e.preventDefault(),!document.querySelector(".-custom-select__body.-anim")&&("Escape"==e.code&&(r.classList.remove("-open"),slideUp(i)),"ArrowUp"==e.code||"ArrowDown"==e.code)){let t=r.querySelector(".-custom-select__item.-active");if(!t)return t=c[0],s.activeOption(t,o,l,r),n&&r.classList.contains("-custom-select-no-choose")&&r.classList.remove("-custom-select-no-choose"),!1;"ArrowUp"==e.code&&t.previousElementSibling&&s.activeOption(t.previousElementSibling,o,l,r),"ArrowDown"==e.code&&t.nextElementSibling&&s.activeOption(t.nextElementSibling,o,l,r)}}activeOption(e,t,s,o,l=null){const r=o.querySelector(".-custom-select__value"),i=o.querySelectorAll(".-custom-select__item");if(i.forEach((e=>e.classList.remove("-active"))),t.selectedIndex=Array.from(i).indexOf(e),l){r.innerHTML=l;r.closest(".-custom-select").classList.add("-custom-select-no-choose")}else{const e=t.selectedIndex;i[e].classList.add("-active"),r.innerHTML=s[e].innerHTML}}actionDocument(e){if(!e.target.closest(".-custom-select")&&document.querySelector(".-custom-select.-open")&&!document.querySelector(".-custom-select__body.-anim")){const e=document.querySelector(".-custom-select.-open"),t=e.querySelector(".-custom-select__body");e.classList.remove("-open"),slideUp(t)}}}const customSelect=new CustomSelect;customSelect.init();const headerElement=document.querySelector(".header");function actionDocument(e){const t=e.target;if(t.closest(".burger-header")){const e=t.closest(".burger-header"),s=document.querySelector(".menu");e.classList.toggle("-active"),s.classList.toggle("-open"),headerElement.classList.toggle("-active"),document.body.classList.toggle("-lock")}if(t.closest(".item-product__action_favourite")){e.preventDefault();t.closest(".item-product__action_favourite").classList.toggle("-active")}if(t.closest(".filter-products__link_sublink input")){const e=t.closest(".filter-products__link_sublink"),s=e.closest(".filter-products__body").querySelector(".filter-products__link_sublink.-active");s&&s!=e&&s.classList.remove("-active"),e.classList.toggle("-active")}if(t.closest(".products-filters__icon")){const e=t.closest(".products-filters__icon");e.classList.toggle("-active"),e.nextElementSibling.classList.toggle("-open"),document.body.classList.toggle("-lock-filter")}}document.addEventListener("click",actionDocument),new LoadMore({el:".top-rating__btn",url:"./json/homeProduct.json",method:"json",afterGet:function(e,t){const s=[];e.products.forEach((e=>{const t=`<a href="${e.link}" class="item-product__image -ai"><picture><source srcset="${e.imgWebp}" type="image/webp"><img src="${e.img}" alt=""></picture></a>`,o=`<a href="" class="item-product__title text">${e.title}</a>`;let l="";for(let t=0;t<5;t++){l+=e.rates>t?'<span class="item-product-rates__rate -active -icon-star"></span>':'<span class="item-product-rates__rate -icon-star"></span>'}const r='<div class="slider-top-rating__item item-product item-product_small">'+t+('<div class="item-product__body">'+o+`<div class="item-product__rates item-product-rates">${l}</div>`+`<div class="item-product__price">${e.price}</div>`+"</div>")+"</div>";s.push(r)}));const o=s.length/3;let l=0;for(let e=0;e<o;e++){let e="";for(let t=0;t<3;t++)s[l]&&(e+=s[l],l++);document.querySelector(".slider-top-rating__wrapper").insertAdjacentHTML("beforeend",`<div class="slider-top-rating__slide swiper-slide swiper-slide_no">${e}</div>`)}t.classList.remove("-hold"),t.parentElement.classList.add("-hide"),t.remove()}});const mainSlider=new Swiper(".main-slider__body",{pagination:{el:".main-slider__pagination",clickable:!0},simulateTouch:!0,grabCursor:!0,watchOverflow:!1,speed:500,autoplay:{delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!1},breakpoints:{0:{spaceBetween:30},767.98:{spaceBetween:50}}});let sliderTopRating=null;const mqlSliderTopRating=window.matchMedia("(max-width:991.98px)");function mediaHandlerSliderTopRating(e){e.matches?sliderTopRating||(sliderTopRating=new Swiper(".slider-top-rating__body",{pagination:{el:".slider-top-rating__pagination",clickable:!0},simulateTouch:!0,grabCursor:!0,watchOverflow:!1,spaceBetween:35,speed:500,breakpoints:{0:{slidesPerView:1,slidesPerGroup:1},575.98:{slidesPerView:2,slidesPerGroup:2}}})):sliderTopRating&&(sliderTopRating.destroy(),sliderTopRating=null)}document.querySelector(".slider-top-rating__body")&&(mediaHandlerSliderTopRating(mqlSliderTopRating),mqlSliderTopRating.addEventListener("change",(e=>{mediaHandlerSliderTopRating(e)})));const formNewsletter=document.querySelector(".form-newsletter");formNewsletter&&new ValidateForm(formNewsletter,{method:"GET",url:"",items:{input:formNewsletter.querySelectorAll('input[type="text"].-req')}}),new LoadMore({el:".products-filters__more",url:"./json/categoryProduct.json",method:"json",afterGet:function(e,t){e.products.forEach((e=>{const t=`<a href="${e.link}" class="item-product__image -ai"><picture><source srcset="${e.imgWebp}" type="image/webp"><img src="${e.img}" alt=""></picture></a>`,s=`<a href="" class="item-product__title text">${e.title}</a>`;let o="";if(0!==e.colors.length){const t='<div class="item-product__colors colors-item-product">',s="</div>";let l="";e.colors.forEach((e=>{l+=`<a href="" class="colors-item-product__item" style="background-color:${e};"></a>`})),o=t+l+s}const l='<div class="products-filters__item item-product item-product_medium">'+t+('<div class="item-product__body">'+s+o+`<div class="item-product__price">${e.price}</div>`+"</div>")+"</div>";document.querySelector(".products-filters__products").insertAdjacentHTML("beforeend",l)})),t.classList.remove("-hold"),t.parentElement.classList.add("-hide"),t.remove()}});const formProduct=document.querySelector(".form-product");formProduct&&new ValidateForm(formProduct,{method:"GET",url:"",items:{select:formProduct.querySelectorAll(".-custom-select.-custom-select-no-choose")}});const sliderProduct=new Swiper(".slider-product-buy__body",{navigation:{prevEl:".slider-product-buy__arrow_prev",nextEl:".slider-product-buy__arrow_next"},simulateTouch:!0,grabCursor:!0,watchOverflow:!1,spaceBetween:22,speed:500,breakpoints:{0:{slidesPerView:1,slidesPerGroup:1},575.98:{slidesPerView:2,slidesPerGroup:2},767.98:{slidesPerView:3,slidesPerGroup:3},1099.98:{slidesPerView:4,slidesPerGroup:4}}});